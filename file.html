<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dino Run Chrome Clone</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background-color: #f7f7f7; 
            font-family: 'Courier New', Courier, monospace;
        }
        canvas { 
            background-color: #fff; 
            border-bottom: 2px solid #535353;
            cursor: pointer;
        }
        .ui {
            position: absolute;
            top: 20px;
            color: #535353;
            font-size: 20px;
            user-select: none;
        }
    </style>
</head>
<body>

    <div class="ui">Score: <span id="score">00000</span></div>
    <canvas id="game"></canvas>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        // Responsive Canvas
        canvas.width = 800;
        canvas.height = 200;

        // Game Constants
        const GRAVITY = 0.6;
        const JUMP_FORCE = -12;
        const GROUND_Y = 160;

        // Assets (SVGs)
        const dinoImg = new Image();
        dinoImg.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+PHJlY3QgeD0iMjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iIzUzNTM1MyIvPjxyZWN0IHg9IjAiIHk9IjEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9biM1MzUzNTMiLz48cmVjdCB4PSIxMCIgeT0iMzAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iIzUzNTM1MyIvPjxyZWN0IHg9IjMwIiB5PSIzMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBmaWxsPSIjNTM1MzUzIi8+PC9zdmc+";

        const cactusImg = new Image();
        cactusImg.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSI0MCI+PHJlY3QgeD0iNSIgeT0iMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjNTM1MzUzIi8+PHJlY3QgeD0iMCIgeT0iMTAiIHdpZHRoPSI1IiBoZWlnaHQ9IjE1IiBmaWxsPSIjNTM1MzUzIi8+PHJlY3QgeD0iMTUiIHk9IjE1IiB3aWR0aD0iNSIgaGVpZ2h0PSIxNSIgZmlsbD0iIzUzNTM1MyIvPjwvc3ZnPg==";

        // Game Variables
        let score = 0;
        let gameSpeed = 6;
        let isGameOver = false;
        let obstacles = [];
        let frame = 0;

        const dino = {
            x: 50,
            y: GROUND_Y,
            w: 40,
            h: 40,
            dy: 0,
            grounded: false
        };

        function handleInput() {
            if (isGameOver) {
                restart();
            } else if (dino.grounded) {
                dino.dy = JUMP_FORCE;
                dino.grounded = false;
            }
        }

        window.addEventListener('keydown', (e) => { if (e.code === 'Space' || e.code === 'ArrowUp') handleInput(); });
        canvas.addEventListener('mousedown', handleInput);

        function restart() {
            score = 0;
            gameSpeed = 6;
            obstacles = [];
            isGameOver = false;
            dino.y = GROUND_Y;
            dino.dy = 0;
            update();
        }

        function update() {
            if (isGameOver) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            frame++;

            // Dino Physics
            dino.dy += GRAVITY;
            dino.y += dino.dy;

            if (dino.y > GROUND_Y) {
                dino.y = GROUND_Y;
                dino.dy = 0;
                dino.grounded = true;
            }

            // Draw Dino
            // Subtle run animation: wobble Y position slightly when grounded
            let runY = (dino.grounded && Math.floor(frame / 8) % 2 === 0) ? dino.y - 2 : dino.y;
            ctx.drawImage(dinoImg, dino.x, runY, dino.w, dino.h);

            // Obstacle Spawning
            if (frame % 100 === 0) {
                obstacles.push({ x: canvas.width, y: GROUND_Y + 5, w: 20, h: 35 });
            }

            // Obstacle Logic
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let o = obstacles[i];
                o.x -= gameSpeed;

                ctx.drawImage(cactusImg, o.x, o.y, o.w, o.h);

                // Simple AABB Collision
                if (dino.x < o.x + o.w && dino.x + dino.w > o.x && 
                    runY < o.y + o.h && runY + dino.h > o.y) {
                    isGameOver = true;
                }

                if (o.x + o.w < 0) {
                    obstacles.splice(i, 1);
                    score++;
                    gameSpeed += 0.1;
                    scoreElement.innerText = score.toString().padStart(5, '0');
                }
            }

            if (isGameOver) {
                ctx.fillStyle = "#535353";
                ctx.font = "30px Arial";
                ctx.textAlign = "center";
                ctx.fillText("G A M E  O V E R", canvas.width/2, canvas.height/2);
                ctx.font = "15px Arial";
                ctx.fillText("Click or Space to Restart", canvas.width/2, canvas.height/2 + 40);
            }

            requestAnimationFrame(update);
        }

        // Start the game loop
        update();
    </script>
</body>
</html>
